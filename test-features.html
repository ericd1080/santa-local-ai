<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Santa Tracker - Feature Test Report</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .feature { margin: 10px 0; padding: 10px; border-radius: 5px; }
        .passed { background-color: #d4edda; border-left: 4px solid #28a745; }
        .failed { background-color: #f8d7da; border-left: 4px solid #dc3545; }
        .loading { background-color: #fff3cd; border-left: 4px solid #ffc107; }
        h1 { color: #dc3545; }
        h2 { color: #28a745; margin-top: 20px; }
    </style>
</head>
<body>
    <h1>ğŸ… Santa Tracker Enhanced - Feature Test Report</h1>
    <div id="test-results"></div>

    <!-- Load modules for testing -->
    <script type="module">
        const results = [];

        function addTest(name, status, details = '') {
            results.push({ name, status, details });
            updateResults();
        }

        function updateResults() {
            const container = document.getElementById('test-results');
            container.innerHTML = results.map(test => `
                <div class="feature ${test.status}">
                    <strong>${test.status === 'passed' ? 'âœ…' : test.status === 'failed' ? 'âŒ' : 'â³'} ${test.name}</strong>
                    ${test.details ? `<br><small>${test.details}</small>` : ''}
                </div>
            `).join('');
        }

        async function runTests() {
            addTest('Starting Feature Tests', 'loading', 'Testing all Santa Tracker Enhanced features...');

            // Test 1: Load SoundManager
            try {
                const soundModule = await import('./js/SoundManager.js');
                addTest('SoundManager Module', 'passed', 'Audio system with sleigh bells, ho-ho-ho, and gift drop sounds');
            } catch (error) {
                addTest('SoundManager Module', 'failed', `Error: ${error.message}`);
            }

            // Test 2: Load LanguageManager
            try {
                const langModule = await import('./js/LanguageManager.js');
                addTest('LanguageManager Module', 'passed', 'Multi-language support (English/Korean)');
            } catch (error) {
                addTest('LanguageManager Module', 'failed', `Error: ${error.message}`);
            }

            // Test 3: Load ReindeerManager
            try {
                const reindeerModule = await import('./js/ReindeerManager.js');
                addTest('ReindeerManager Module', 'passed', '9 individual reindeer with personalities and real-time status updates');
            } catch (error) {
                addTest('ReindeerManager Module', 'failed', `Error: ${error.message}`);
            }

            // Test 4: Load WeatherManager
            try {
                const weatherModule = await import('./js/WeatherManager.js');
                addTest('WeatherManager Module', 'passed', 'Dynamic weather conditions along Santa\'s route with forecasts');
            } catch (error) {
                addTest('WeatherManager Module', 'failed', `Error: ${error.message}`);
            }

            // Test 5: Load ChimneySafetyManager
            try {
                const safetyModule = await import('./js/ChimneySafetyManager.js');
                addTest('ChimneySafetyManager Module', 'passed', '12 safety tip categories with Santa quotes and real-time rotation');
            } catch (error) {
                addTest('ChimneySafetyManager Module', 'failed', `Error: ${error.message}`);
            }

            // Test 6: Configuration File
            try {
                const response = await fetch('./config/santa-config.json');
                const config = await response.json();
                addTest('Configuration System', 'passed', `AI Provider: ${config.aiProvider?.type}, Models: ${config.aiProvider?.availableModels?.length}`);
            } catch (error) {
                addTest('Configuration System', 'failed', `Error: ${error.message}`);
            }

            // Test 7: Main HTML File
            try {
                const response = await fetch('./santa-tracker-enhanced.html');
                const html = await response.text();
                const hasReindeerPanel = html.includes('ReindeerPanel');
                const hasWeatherPanel = html.includes('WeatherPanel');
                const hasSafetyPanel = html.includes('ChimneySafetyPanel');
                const hasGiftAnimations = html.includes('giftDrop');
                const noSocialMedia = !html.includes('shareToTwitter') && !html.includes('ShareModal');

                if (hasReindeerPanel && hasWeatherPanel && hasSafetyPanel && hasGiftAnimations && noSocialMedia) {
                    addTest('Main Application Integration', 'passed', 'All panels integrated, enhanced animations, social media removed');
                } else {
                    addTest('Main Application Integration', 'failed', 'Missing components or social media not removed');
                }
            } catch (error) {
                addTest('Main Application Integration', 'failed', `Error: ${error.message}`);
            }

            // Summary
            const passed = results.filter(r => r.status === 'passed').length - 1; // Subtract loading message
            const failed = results.filter(r => r.status === 'failed').length;
            const total = passed + failed;

            addTest('Test Summary', passed === total ? 'passed' : 'failed',
                   `${passed}/${total} tests passed. ${failed > 0 ? 'Some features may need attention.' : 'All features working correctly!'}`);
        }

        runTests();
    </script>
</body>
</html>